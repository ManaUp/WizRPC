var _0x3beb=['login','catch','error','discord-rpc','./config.json','480677792422428692','gamePath','/Bin/WizardClient.log','readline','createInterface','createReadStream','./zones.csv','Character\x20Selection','line','split','length','keys','indexOf','initial','null','register','Client','ipc','GameClient::LoadZone()\x20-\x20Finished\x20loading\x20zone','substr','replace','push','log','NEW\x20ZONE\x20ENTERED:\x20','Updating\x20health\x20globe\x20(new\x20health','includes','WizardClientMod\x20MSG_UpdateHealth','new\x20health:\x20','setActivity','In\x20','current','max','largeImageKey','largeImageText','smallImageKey','Wizard101','Activity\x20updated'];(function(_0x563cd9,_0xa0dda0){var _0x294cba=function(_0x4b0994){while(--_0x4b0994){_0x563cd9['push'](_0x563cd9['shift']());}};_0x294cba(++_0xa0dda0);}(_0x3beb,0x1a7));var _0x4034=function(_0x3bc0de,_0x50f44f){_0x3bc0de=_0x3bc0de-0x0;var _0x20e907=_0x3beb[_0x3bc0de];return _0x20e907;};const DiscordRPC=require(_0x4034('0x0'));const config=require(_0x4034('0x1'));const keymap=require('./keymap.js');const clientId=_0x4034('0x2');const logPath=config[_0x4034('0x3')]+_0x4034('0x4');let lr=require(_0x4034('0x5'))[_0x4034('0x6')]({'input':require('fs')[_0x4034('0x7')](_0x4034('0x8'))});let locations={'initial':_0x4034('0x9')};lr['on'](_0x4034('0xa'),function(_0x5c14b1){let _0x55b53b=_0x5c14b1[_0x4034('0xb')](',');if(_0x55b53b[0x1][_0x4034('0xc')]>0x0&&Object[_0x4034('0xd')](locations)[_0x4034('0xe')](_0x55b53b[0x0])<0x0){let _0x3f7d79=_0x55b53b[0x0];locations[_0x3f7d79]=_0x55b53b[0x1];}});let getWorld=_0x30df91=>{return _0x30df91['split']('/')[0x0];};let convertZone=_0x565b85=>{if(Object['keys'](locations)[_0x4034('0xe')](_0x565b85)>-0x1){return locations[_0x565b85];}else{return getImageKeys(getWorld(_0x565b85))['largeImageText'];}};let storage=[];let longStorage=[_0x4034('0xf')];let healthStorage=[];let specificHealthStorage=[{'current':'null','max':_0x4034('0x10')}];DiscordRPC[_0x4034('0x11')](clientId);const rpc=new DiscordRPC[(_0x4034('0x12'))]({'transport':_0x4034('0x13')});const startTimestamp=new Date();async function setActivity(){if(!rpc){return;}let _0x2a3dfe=require('readline')[_0x4034('0x6')]({'input':require('fs')[_0x4034('0x7')](logPath)});_0x2a3dfe['on'](_0x4034('0xa'),function(_0x3fb3b0){if(_0x3fb3b0['includes'](_0x4034('0x14'))&&storage[_0x4034('0xe')](_0x3fb3b0)<0x0){storage['push'](_0x3fb3b0);let _0xab1249=_0x3fb3b0[_0x4034('0x15')](_0x3fb3b0[_0x4034('0xe')]('\x27')+0x1)[_0x4034('0x16')]('\x27.','');longStorage[_0x4034('0x17')](_0xab1249);console[_0x4034('0x18')](_0x4034('0x19'),convertZone(_0xab1249));}else if(_0x3fb3b0['includes'](_0x4034('0x1a'))&&!_0x3fb3b0[_0x4034('0x1b')](_0x4034('0x1c'))&&healthStorage['indexOf'](_0x3fb3b0)<0x0){healthStorage[_0x4034('0x17')](_0x3fb3b0);let _0x3b1bd1=_0x3fb3b0[_0x4034('0xb')](_0x4034('0x1d'))[0x1];let _0x1a547a=_0x3b1bd1['split'](',\x20new\x20health\x20max:\x20');let _0x5b8386=_0x1a547a[0x0];let _0x3a127a=_0x1a547a[0x1][_0x4034('0x16')](')','');maxHealth2=_0x3a127a['split']('|');_0x3a127a=maxHealth2[0x0];let _0x466ab2={'current':_0x5b8386,'max':_0x3a127a};specificHealthStorage[_0x4034('0x17')](_0x466ab2);}});let _0x381392=longStorage[longStorage[_0x4034('0xc')]-0x1];let _0x3ed5ae=convertZone(_0x381392);let _0x4a984e=specificHealthStorage[specificHealthStorage[_0x4034('0xc')]-0x1];let _0x468787=getWorld(_0x381392);let _0x5ba965=keymap['getImageKeys'](_0x468787);console[_0x4034('0x18')](_0x5ba965);rpc[_0x4034('0x1e')]({'details':_0x4034('0x1f')+_0x3ed5ae,'state':'Health:\x20'+_0x4a984e[_0x4034('0x20')]+'/'+_0x4a984e[_0x4034('0x21')],'startTimestamp':startTimestamp,'largeImageKey':_0x5ba965[_0x4034('0x22')],'largeImageText':_0x5ba965[_0x4034('0x23')],'smallImageKey':_0x5ba965[_0x4034('0x24')],'smallimageText':_0x4034('0x25'),'instance':![]});}rpc['on']('ready',()=>{setInterval(()=>{setActivity();console[_0x4034('0x18')](_0x4034('0x26'));},0x3a98);});rpc[_0x4034('0x27')]({'clientId':clientId})[_0x4034('0x28')](console[_0x4034('0x29')]);